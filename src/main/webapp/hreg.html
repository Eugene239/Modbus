<html >
<head>
    <meta charset="utf-8">
    <title>Ячейки</title>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/connection.js"></script>
    <script src="js/modbus.js"></script>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body  onload="isConnect()">

<div id="main">
    <div id="menu">
        <div id="headerMenu">
            <img id="modbusImage" src="images/modbus.png">
        </div>

        <div class="menuColumn">
            <span class="menuColumnText" onclick="window.location='main.html'">Подключение </span>
        </div>
        <div class="menuColumn">
            <span class="menuColumnText"  onclick="window.location='index.html'">Coils </span>
        </div>
        <div class="menuColumn">
            <span class="menuColumnText" style="background: grey" onclick="window.location='hreg.html'">Hregs</span>
        </div>
        <div class="menuColumn">
            <span class="menuColumnText">Настройка </span>
        </div>
        <div class="menuColumn" style="bottom: 0px; position: absolute">Статус: <span id="status">Неизвестно</span>
        </div>
    </div>
    <div id="fieldMain">
        <div id="field" >
            <div class="headerField" style="margin-top: 10px">Hregs
                <div style="float: right; margin-right: 10px">От <input id="above" type="number" class="input_value"
                                                                        value="0"> До
                    <input id="below" type="number" class="input_value" value="10"></div>
            </div>
            <div id="hregs" class="coilField">
                <div> <input id="rangeId0" type="range" max="255"></div><span id="rangeVal0"></span>
                <div> <input id="rangeId1" type="range" max="255"></div><span id="rangeVal1"></span>
                <div> <input id="rangeId2" type="range" max="255"></div><span id="rangeVal2"></span>
            </div>
        </div>
    </div>
</div>

<script>
     $("#rangeId0").on('input',function(){
         $("#rangeVal0").text($("#rangeId0").val());
         writeRegister(0,$("#rangeId0").val());
     });
     $("#rangeId1").on('input',function(){
         $("#rangeVal1").text($("#rangeId1").val());
         writeRegister(1,$("#rangeId1").val());
     });
     $("#rangeId2").on('input',function(){
         $("#rangeVal2").text($("#rangeId2").val());
         writeRegister(2,$("#rangeId2").val());
     });
    // setInterval(function(){update();}, 500);
    // updateCoils();

</script>
</body>
</html>